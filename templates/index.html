<!DOCTYPE html>
<html>
<head>
    <title>ÎÉâÏû•Í≥† Í¥ÄÎ¶¨</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <h1>ÎèÑÏ£º ÎÉâÏû•Í≥†</h1>
        <div class="nav-buttons">
            <a href="{{ url_for('add_item') }}" class="add-button">ÏÉà Î¨ºÌíà Ï∂îÍ∞Ä</a>
            <a href="{{ url_for('recipes') }}" class="recipe-button">üç≥ Î†àÏãúÌîº</a>
        </div>
        
        <div class="items-grid">
            <div class="temperature-display">-2¬∞C</div>
            <!-- ÏÉÅÎã® ÏôºÏ™Ω ÏÑπÏÖò -->
            <div class="fridge-section section-top-left" onclick="addItemAtLocation('ÏÉÅÎã® ÏôºÏ™Ω')">
                <div class="section-items">
                    {% for item in items %}
                        {% if item.location == 'ÏÉÅÎã® ÏôºÏ™Ω' %}
                            <div class="item-card {% if item.is_expired %}expired{% endif %}" onclick="event.stopPropagation()">
                                <div class="item-info">
                                    <h3>{{ item.name }}</h3>
                                    <p class="category-tag">{{ item.category }}</p>
                                    <p class="date-info">
                                        <span class="purchase-date">
                                            <span class="date-label">Íµ¨Îß§:</span>
                                            <span class="date-value">{{ item.purchase_date }}</span>
                                        </span>
                                        <span class="expiry-date {% if item.is_expired %}expired-text{% elif item.days_left <= 3 %}warning-text{% else %}safe-text{% endif %}">
                                            <span class="date-label">Ïú†ÌÜµ:</span>
                                            <span class="date-value">
                                                {{ item.expiry_date }}
                                                {% if item.is_expired %}
                                                    <span class="expired-badge">ÎßåÎ£å</span>
                                                {% elif item.days_left <= 3 %}
                                                    <span class="warning-badge">{{ item.days_left }}Ïùº</span>
                                                {% else %}
                                                    <span class="safe-badge">{{ item.days_left }}Ïùº</span>
                                                {% endif %}
                                            </span>
                                        </span>
                                    </p>
                                </div>
                                <form class="quantity-form" action="{{ url_for('update_quantity', item_id=item.id) }}" method="POST">
                                    <div class="quantity-control">
                                        <button type="button" class="quantity-btn minus" onclick="decrementQuantity(this)">-</button>
                                        <input type="number" name="quantity" value="{{ item.quantity }}" min="1" class="quantity-input" onchange="this.form.submit()">
                                        <button type="button" class="quantity-btn plus" onclick="incrementQuantity(this)">+</button>
                                    </div>
                                </form>
                                <a href="{{ url_for('delete_item', item_id=item.id) }}" 
                                   class="delete-button"
                                   onclick="return confirm('Ï†ïÎßê ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')">ÏÇ≠Ï†ú</a>
                            </div>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>

            <!-- ÏÉÅÎã® Ïò§Î•∏Ï™Ω ÏÑπÏÖò -->
            <div class="fridge-section section-top-right" onclick="addItemAtLocation('ÏÉÅÎã® Ïò§Î•∏Ï™Ω')">
                <div class="section-items">
                    {% for item in items %}
                        {% if item.location == 'ÏÉÅÎã® Ïò§Î•∏Ï™Ω' %}
                            <div class="item-card {% if item.is_expired %}expired{% endif %}" onclick="event.stopPropagation()">
                                <div class="item-info">
                                    <h3>{{ item.name }}</h3>
                                    <p class="category-tag">{{ item.category }}</p>
                                    <p class="date-info">
                                        <span class="purchase-date">
                                            <span class="date-label">Íµ¨Îß§:</span>
                                            <span class="date-value">{{ item.purchase_date }}</span>
                                        </span>
                                        <span class="expiry-date {% if item.is_expired %}expired-text{% elif item.days_left <= 3 %}warning-text{% else %}safe-text{% endif %}">
                                            <span class="date-label">Ïú†ÌÜµ:</span>
                                            <span class="date-value">
                                                {{ item.expiry_date }}
                                                {% if item.is_expired %}
                                                    <span class="expired-badge">ÎßåÎ£å</span>
                                                {% elif item.days_left <= 3 %}
                                                    <span class="warning-badge">{{ item.days_left }}Ïùº</span>
                                                {% else %}
                                                    <span class="safe-badge">{{ item.days_left }}Ïùº</span>
                                                {% endif %}
                                            </span>
                                        </span>
                                    </p>
                                </div>
                                <form class="quantity-form" action="{{ url_for('update_quantity', item_id=item.id) }}" method="POST">
                                    <div class="quantity-control">
                                        <button type="button" class="quantity-btn minus" onclick="decrementQuantity(this)">-</button>
                                        <input type="number" name="quantity" value="{{ item.quantity }}" min="1" class="quantity-input" onchange="this.form.submit()">
                                        <button type="button" class="quantity-btn plus" onclick="incrementQuantity(this)">+</button>
                                    </div>
                                </form>
                                <a href="{{ url_for('delete_item', item_id=item.id) }}" 
                                   class="delete-button"
                                   onclick="return confirm('Ï†ïÎßê ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')">ÏÇ≠Ï†ú</a>
                            </div>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>

            <!-- ÌïòÎã® ÏôºÏ™Ω ÏÑπÏÖò -->
            <div class="fridge-section section-bottom-left" onclick="addItemAtLocation('ÌïòÎã® ÏôºÏ™Ω')">
                <div class="section-items">
                    {% for item in items %}
                        {% if item.location == 'ÌïòÎã® ÏôºÏ™Ω' %}
                            <div class="item-card {% if item.is_expired %}expired{% endif %}" onclick="event.stopPropagation()">
                                <div class="item-info">
                                    <h3>{{ item.name }}</h3>
                                    <p class="category-tag">{{ item.category }}</p>
                                    <p class="date-info">
                                        <span class="purchase-date">
                                            <span class="date-label">Íµ¨Îß§:</span>
                                            <span class="date-value">{{ item.purchase_date }}</span>
                                        </span>
                                        <span class="expiry-date {% if item.is_expired %}expired-text{% elif item.days_left <= 3 %}warning-text{% else %}safe-text{% endif %}">
                                            <span class="date-label">Ïú†ÌÜµ:</span>
                                            <span class="date-value">
                                                {{ item.expiry_date }}
                                                {% if item.is_expired %}
                                                    <span class="expired-badge">ÎßåÎ£å</span>
                                                {% elif item.days_left <= 3 %}
                                                    <span class="warning-badge">{{ item.days_left }}Ïùº</span>
                                                {% else %}
                                                    <span class="safe-badge">{{ item.days_left }}Ïùº</span>
                                                {% endif %}
                                            </span>
                                        </span>
                                    </p>
                                </div>
                                <form class="quantity-form" action="{{ url_for('update_quantity', item_id=item.id) }}" method="POST">
                                    <div class="quantity-control">
                                        <button type="button" class="quantity-btn minus" onclick="decrementQuantity(this)">-</button>
                                        <input type="number" name="quantity" value="{{ item.quantity }}" min="1" class="quantity-input" onchange="this.form.submit()">
                                        <button type="button" class="quantity-btn plus" onclick="incrementQuantity(this)">+</button>
                                    </div>
                                </form>
                                <a href="{{ url_for('delete_item', item_id=item.id) }}" 
                                   class="delete-button"
                                   onclick="return confirm('Ï†ïÎßê ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')">ÏÇ≠Ï†ú</a>
                            </div>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>

            <!-- ÌïòÎã® Ïò§Î•∏Ï™Ω ÏÑπÏÖò -->
            <div class="fridge-section section-bottom-right" onclick="addItemAtLocation('ÌïòÎã® Ïò§Î•∏Ï™Ω')">
                <div class="section-items">
                    {% for item in items %}
                        {% if item.location == 'ÌïòÎã® Ïò§Î•∏Ï™Ω' %}
                            <div class="item-card {% if item.is_expired %}expired{% endif %}" onclick="event.stopPropagation()">
                                <div class="item-info">
                                    <h3>{{ item.name }}</h3>
                                    <p class="category-tag">{{ item.category }}</p>
                                    <p class="date-info">
                                        <span class="purchase-date">
                                            <span class="date-label">Íµ¨Îß§:</span>
                                            <span class="date-value">{{ item.purchase_date }}</span>
                                        </span>
                                        <span class="expiry-date {% if item.is_expired %}expired-text{% elif item.days_left <= 3 %}warning-text{% else %}safe-text{% endif %}">
                                            <span class="date-label">Ïú†ÌÜµ:</span>
                                            <span class="date-value">
                                                {{ item.expiry_date }}
                                                {% if item.is_expired %}
                                                    <span class="expired-badge">ÎßåÎ£å</span>
                                                {% elif item.days_left <= 3 %}
                                                    <span class="warning-badge">{{ item.days_left }}Ïùº</span>
                                                {% else %}
                                                    <span class="safe-badge">{{ item.days_left }}Ïùº</span>
                                                {% endif %}
                                            </span>
                                        </span>
                                    </p>
                                </div>
                                <form class="quantity-form" action="{{ url_for('update_quantity', item_id=item.id) }}" method="POST">
                                    <div class="quantity-control">
                                        <button type="button" class="quantity-btn minus" onclick="decrementQuantity(this)">-</button>
                                        <input type="number" name="quantity" value="{{ item.quantity }}" min="1" class="quantity-input" onchange="this.form.submit()">
                                        <button type="button" class="quantity-btn plus" onclick="incrementQuantity(this)">+</button>
                                    </div>
                                </form>
                                <a href="{{ url_for('delete_item', item_id=item.id) }}" 
                                   class="delete-button"
                                   onclick="return confirm('Ï†ïÎßê ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')">ÏÇ≠Ï†ú</a>
                            </div>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
    <script>
    function incrementQuantity(btn) {
        const input = btn.parentElement.querySelector('input');
        input.value = parseInt(input.value) + 1;
        input.form.submit();
    }

    function decrementQuantity(btn) {
        const input = btn.parentElement.querySelector('input');
        if (parseInt(input.value) > 1) {
            input.value = parseInt(input.value) - 1;
            input.form.submit();
        }
    }

    function addItemAtLocation(location) {
        const section = event.currentTarget;
        section.classList.add('opening');
        
        // Ïï†ÎãàÎ©îÏù¥ÏÖòÏù¥ ÎÅùÎÇòÎ©¥ ÌéòÏù¥ÏßÄ Ïù¥Îèô
        setTimeout(() => {
            window.location.href = "{{ url_for('add_item') }}?location=" + encodeURIComponent(location);
        }, 800); // Ïï†ÎãàÎ©îÏù¥ÏÖòÏù¥ Í±∞Ïùò ÎÅùÎÇ† Î¨¥Î†µ Ïù¥Îèô
        
        // Ïù¥Î≤§Ìä∏ Ìïú Î≤àÎßå Ïã§ÌñâÎêòÎèÑÎ°ù
        event.preventDefault();
    }

    // Ïï†ÎãàÎ©îÏù¥ÏÖòÏù¥ ÎÅùÎÇòÎ©¥ ÌÅ¥ÎûòÏä§ Ï†úÍ±∞
    document.querySelectorAll('.fridge-section').forEach(section => {
        section.addEventListener('animationend', () => {
            section.classList.remove('opening');
        });
    });
    </script>
</body>
</html> 